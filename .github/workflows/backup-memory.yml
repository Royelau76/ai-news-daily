name: Backup Memory Files

on:
  schedule:
    # æ¯å¤© UTC 02:00 è¿è¡Œ (åŒ—äº¬æ—¶é—´ 10:00)
    - cron: '0 2 * * *'
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Create backup directory
        run: mkdir -p memory-backup
      
      - name: Create backup README
        run: |
          cat > memory-backup/README.md << 'EOF'
          # ðŸ§  è®°å¿†æ–‡ä»¶å¤‡ä»½

          ## ðŸ“… è‡ªåŠ¨å¤‡ä»½

          æœ¬ç›®å½•åŒ…å« AI åŠ©æ‰‹çš„å…³é”®è®°å¿†æ–‡ä»¶å¤‡ä»½ã€‚

          ## ðŸ“ æ–‡ä»¶è¯´æ˜Ž

          | æ–‡ä»¶ | è¯´æ˜Ž |
          |------|------|
          | MEMORY.md | é•¿æœŸè®°å¿†ã€é‡è¦äº‹ä»¶ã€å­¦ä¹ æ€»ç»“ |
          | IDENTITY.md | AIèº«ä»½é…ç½®ï¼ˆåç§°ã€æ€§æ ¼ç­‰ï¼‰ |
          | USER.md | ç”¨æˆ·ä¿¡æ¯ã€åå¥½ |
          | SOUL.md | æ ¸å¿ƒäººæ ¼ã€è¡Œä¸ºå‡†åˆ™ |
          | AGENTS.md | ä»£ç†é…ç½®ã€å·¥ä½œè§„èŒƒ |
          | TOOLS.md | å·¥å…·é…ç½®ã€çŽ¯å¢ƒä¿¡æ¯ |

          ## ðŸ”„ å¤‡ä»½é¢‘çŽ‡

          - **è‡ªåŠ¨å¤‡ä»½**: æ¯å¤©åŒ—äº¬æ—¶é—´ 10:00
          - **æ‰‹åŠ¨è§¦å‘**: å¯åœ¨ Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œ

          ---
          *ç”± GitHub Actions è‡ªåŠ¨ç”Ÿæˆ*
          EOF
      
      - name: Commit and push
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add memory-backup/
          git commit -m "ðŸ§  Daily memory backup - $(date +'%Y-%m-%d')" || echo "No changes"
          git push
